<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Poker Pro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(135deg, #0f0f23, #1e293b);
            color: white; min-height: 100vh; 
        }
        .header { text-align: center; padding: 20px; background: rgba(0,0,0,0.3); }
        .container { max-width: 450px; margin: 0 auto; padding: 20px; }
        .lobby { text-align: center; }
        .lobby h2 { margin: 40px 0 20px 0; font-size: 28px; }
        .big-btn { 
            background: linear-gradient(45deg, #8B5CF6, #7C3AED); 
            color: white; border: none; padding: 25px 40px; border-radius: 25px;
            font-size: 20px; font-weight: bold; cursor: pointer; width: 100%;
            margin: 25px 0; transition: all 0.3s; box-shadow: 0 10px 30px rgba(139,92,246,0.4);
        }
        .big-btn:hover { transform: scale(1.05); }
        .big-btn:active { transform: scale(0.98); }
        .screen { display: none; }
        .screen.active { display: block; }
        .room-code { 
            background: linear-gradient(45deg, #10B981, #059669); 
            color: black; padding: 20px 30px; border-radius: 20px;
            font-size: 28px; font-weight: bold; margin: 25px 0; letter-spacing: 4px;
        }
        .players-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 30px 0; }
        .player-slot { 
            width: 70px; height: 70px; border-radius: 50%; 
            background: rgba(255,255,255,0.1); border: 3px solid rgba(255,255,255,0.2);
            display: flex; align-items: center; justify-content: center; font-size: 24px;
            transition: all 0.3s;
        }
        .player-slot.active { 
            background: #10B981; border-color: #059669; transform: scale(1.2);
        }
        .waiting-text { 
            background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; 
            font-size: 18px; text-align: center; margin: 20px 0; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üÉè Poker Pro</h1>
        <div>–ö–æ–º–Ω–∞—Ç–∞: <span id="roomId">-----</span></div>
    </div>

    <div class="container">
        <!-- –õ–û–ë–ë–ò -->
        <div class="lobby screen active" id="lobbyScreen">
            <h2>üéÆ –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</h2>
            <p style="opacity: 0.8; margin: 20px 0 40px 0; font-size: 16px;">
                –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É –∏ –∂–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π
            </p>
            <button class="big-btn" onclick="createRoom()">
                üöÄ –°–û–ó–î–ê–¢–¨ –ö–û–ú–ù–ê–¢–£
            </button>
        </div>

        <!-- –ö–û–ú–ù–ê–¢–ê -->
        <div class="screen" id="roomScreen">
            <h2 style="text-align: center; margin: 20px 0;">‚úÖ –ö–æ–º–Ω–∞—Ç–∞ –≥–æ—Ç–æ–≤–∞!</h2>
            <div class="room-code" id="roomCode">–ì–ï–ù–ï–†–ò–†–£–ï–¢–°–Ø...</div>
            <p style="opacity: 0.9; text-align: center; margin: 15px 0;">
                –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º —Å –¥—Ä—É–∑—å—è–º–∏
            </p>
            
            <div style="text-align: center; margin: 30px 0;">
                <h3 style="margin-bottom: 20px;">–ò–≥—Ä–æ–∫–∏ (1/8)</h3>
                <div class="players-grid" id="playerSlots"></div>
            </div>
            
            <div class="waiting-text" id="waitingText">
                ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤... (3/8)
            </div>
            
            <button class="big-btn" onclick="startGame()" id="startGameBtn" style="display: none;">
                üéÆ –ù–ê–ß–ê–¢–¨ –ò–ì–†–£
            </button>
            
            <button class="big-btn" onclick="showLobby()" style="background: #6B7280; margin-top: 15px;">
                ‚Üê –ù–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é").setColor('#6B7280').show();

        let currentRoom = {
            code: '',
            players: 1,
            maxPlayers: 8
        };

        // ‚úÖ –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø - –°–û–ó–î–ê–ù–ò–ï –ö–û–ú–ù–ê–¢–´
        function createRoom() {
            console.log("üî• –ö–ù–û–ü–ö–ê –ù–ê–ñ–ê–¢–ê - –°–û–ó–î–ê–Å–ú –ö–û–ú–ù–ê–¢–£!");
            
            tg.HapticFeedback.impactOccurred("heavy");
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
            currentRoom.code = "ROOM" + Math.random().toString(36).substr(2, 4).toUpperCase();
            currentRoom.players = 1;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            document.getElementById('roomCode').textContent = currentRoom.code;
            document.getElementById('roomId').textContent = currentRoom.code;
            
            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω –∫–æ–º–Ω–∞—Ç—ã
            showScreen('roomScreen');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã –∏–≥—Ä–æ–∫–æ–≤
            updatePlayerSlots();
            
            tg.showAlert(`‚úÖ –ö–æ–º–Ω–∞—Ç–∞ ${currentRoom.code} —Å–æ–∑–¥–∞–Ω–∞!`);
            
            // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤
            simulatePlayerJoining();
        }

        // ‚úÖ –°–ò–ú–£–õ–Ø–¶–ò–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ò–ì–†–û–ö–û–í
        function simulatePlayerJoining() {
            let playerCount = 1;
            const interval = setInterval(() => {
                playerCount++;
                currentRoom.players = playerCount;
                updatePlayerSlots();
                updateWaitingText();
                
                tg.HapticFeedback.notificationOccurred("error");
                
                if (playerCount >= 4) {
                    document.getElementById('startGameBtn').style.display = 'block';
                    clearInterval(interval);
                } else if (playerCount >= 8) {
                    clearInterval(interval);
                }
            }, 2000); // –ò–≥—Ä–æ–∫ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        }

        // ‚úÖ –û–ë–ù–û–í–ò–¢–¨ –°–õ–û–¢–´ –ò–ì–†–û–ö–û–í
        function updatePlayerSlots() {
            const slots = document.getElementById('playerSlots');
            slots.innerHTML = '';
            
            for (let i = 0; i < currentRoom.maxPlayers; i++) {
                const slot = document.createElement('div');
                slot.className = `player-slot ${i < currentRoom.players ? 'active' : ''}`;
                if (i < currentRoom.players) {
                    slot.textContent = 'üë§';
                }
                slots.appendChild(slot);
            }
        }

        // ‚úÖ –û–ë–ù–û–í–ò–¢–¨ –¢–ï–ö–°–¢ –û–ñ–ò–î–ê–ù–ò–Ø
        function updateWaitingText() {
            document.getElementById('waitingText').textContent = 
                `‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤... (${currentRoom.players}/8)`;
        }

        // ‚úÖ –ù–ê–ß–ê–¢–¨ –ò–ì–†–£
        function startGame() {
            tg.HapticFeedback.impactOccurred("heavy");
            tg.showAlert("üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!");
            // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∞–ª–µ—Ä—Ç - –∏–≥—Ä—É –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ
            showScreen('lobbyScreen');
        }

        // ‚úÖ –ü–û–ö–ê–ó–ê–¢–¨ –õ–û–ë–ë–ò
        function showLobby() {
            showScreen('lobbyScreen');
        }

        // ‚úÖ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –≠–ö–†–ê–ù–û–í
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // ‚úÖ –ö–û–ù–°–û–õ–¨ –î–õ–Ø –û–¢–õ–ê–î–ö–ò
        console.log("‚úÖ WebApp –∑–∞–≥—Ä—É–∂–µ–Ω. –ù–∞–∂–º–∏—Ç–µ '–°–û–ó–î–ê–¢–¨ –ö–û–ú–ù–ê–¢–£'");
        
        tg.ready();
    </script>
</body>
</html>
